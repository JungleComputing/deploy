#!/bin/sh

if [ -z "$IBIS_DEPLOY_HOME" ] ; then
        echo IBIS_DEPLOY_HOME variable not set
	exit 1;
fi

# ---- do not touch anything below this line ----

add_to_classpath () {
	DIRLIBS=${1}/*.jar
	for i in ${DIRLIBS}
	do
		 # if the directory is empty, then it will return the input string
		 # this is stupid, so case for it
		 if [ "$i" != "${DIRLIBS}" ] ; then
			if [ -z "$IBIS_DEPLOY_CLASSPATH" ] ; then
		IBIS_DEPLOY_CLASSPATH=$i
			else
		IBIS_DEPLOY_CLASSPATH="$i":$IBIS_DEPLOY_CLASSPATH
			fi
		 fi
	done
}

add_to_classpath $IBIS_DEPLOY_HOME/lib

java -cp $CLASSPATH:$IBIS_DEPLOY_CLASSPATH -Dlog4j.configuration=file:$IBIS_DEPLOY_HOME/log4j.properties -Dgat.adaptor.path=$IBIS_DEPLOY_HOME/lib/adaptors ibis.deploy.IbisDeploy $*
